@page "/login"
@using MEOW_BUSINESS.Services
@inject NavigationManager Navigation
@inject IUserStateService UserStateService

<h3>Login</h3>

<MatTextField @bind-Value="_name" Label="Your name" />
<MatButton @onclick="Continue">Continue</MatButton>

@code {
    private string _name = String.Empty;
    
    protected override void OnInitialized()
    {
        var existingName = UserStateService.GetName();
        if (!string.IsNullOrWhiteSpace(existingName))
        {
            _name = existingName;
            Navigation.NavigateTo("/");
        }
    }

    private void Continue()
    {
        if (string.IsNullOrWhiteSpace(_name)) return;

        UserStateService.SetName(_name.Trim());
        Navigation.NavigateTo("/");
    }
}